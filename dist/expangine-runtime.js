!function(t,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define("expangine-runtime",[],n):"object"==typeof exports?exports["expangine-runtime"]=n():t["expangine-runtime"]=n()}(this,function(){return function(t){var n={};function e(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,e),o.l=!0,o.exports}return e.m=t,e.c=n,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:r})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,n){if(1&n&&(t=e(t)),8&n)return t;if(4&n&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(e.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var o in t)e.d(r,o,function(n){return t[n]}.bind(null,o));return r},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},e.p="",e(e.s=0)}([function(t,n,e){"use strict";function r(t){return"number"==typeof t&&isFinite(t)}function o(t){return"string"==typeof t}function i(t){return Array.isArray(t)}function u(t){return"boolean"==typeof t}function c(t){return"function"==typeof t}function p(t){return"object"==typeof t&&!Array.isArray(t)}function s(t){return void 0===t}function f(t){if(i(t))return 0===t.length;if(p(t)){for(var n in t)return!1;return!0}return null==t}function a(t,n,e){void 0===e&&(e=function(t){return t});var r={};for(var o in t){var i=t[o];r[e(o,i)]=n(i,o)}return r}e.r(n);var y,d=function(){function t(t){this.options=t}return t.prototype.getOperations=function(t){var n=this;return this.operations||(this.operations=a(t.operations.map,function(t){return t(n)})),this.operations},t}(),l=function(t,n){var e="function"==typeof Symbol&&t[Symbol.iterator];if(!e)return t;var r,o,i=e.call(t),u=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)u.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(e=i.return)&&e.call(i)}finally{if(o)throw o.error}}return u},h=function(){function t(t){this.prefix=t,this.map=Object.create(null)}return t.prototype.get=function(t,n){return(this.map[t]||this.map[this.prefix+t])(n)},t.prototype.set=function(t,n,e,r,o){var i=this.prefix+t,u={id:i,returnType:n,params:e,optional:r,scope:o};return this.put(i,function(){return u})},t.prototype.build=function(t,n){var e=this.prefix+t;return this.put(e,function(t){var r=l(n(t),4),o=r[0],i=r[1],u=r[2],c=r[3];return{id:e,returnType:o,params:i,optional:u,scope:c}})},t.prototype.put=function(t,n){var e=n;return e.id=t,this.map[t]=e,e},t}(),_=function(t){this.id=t},b=(y=function(t,n){return(y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)n.hasOwnProperty(e)&&(t[e]=n[e])})(t,n)},function(t,n){function e(){this.constructor=t}y(t,n),t.prototype=null===n?Object.create(n):(e.prototype=n.prototype,new e)}),v=function(t){function n(e){var r=t.call(this,n.id)||this;return r.value=e,r}return b(n,t),n.decode=function(t,e){return new n(t[1])},n.encode=function(t){return i(t.value)?[this.id,t.value]:t.value},n.prototype.getScope=function(){return null},n.prototype.encode=function(){return n.encode(this)},n.id="constant",n}(_),O=function(){function t(t){var n=this;this.types=Object.create(null),this.expressions=Object.create(null),this.parsers=Object.create(null),this.operations=new h(""),t&&(t.types&&t.types.forEach(function(t){return n.addType(t)}),t.expressions&&t.expressions.forEach(function(t){return n.addExpression(t)}),t.aliases&&a(t.aliases,function(t,e){return n.addAlias(e,t)}))}return t.prototype.addType=function(t){this.types[t.id]=t,this.parsers[t.id]=function(n,e){return t.decode(n,e)}},t.prototype.addAlias=function(t,n){var e=n instanceof d?n:this.getType(n);this.parsers[t]=function(){return e}},t.prototype.getType=function(t){var n=i(t)?t[0]:t,e=i(t)?t:[];return this.parsers[n](e,this)},t.prototype.addExpression=function(t){this.expressions[t.id]=t},t.prototype.getExpression=function(t){if(i(t)){var n=this.expressions[t[0]];if(!n)throw new Error("An expression was not found for: "+JSON.stringify(t));return n.decode(t,this)}return new v(t)},t}(),m=function(){function t(t){this.defs=t,this.ops=Object.create(null),this.exprs=Object.create(null)}return t.prototype.setOperation=function(t,n){this.ops[t.id]=n},t.prototype.setExpression=function(t,n){this.exprs[t.id]=n},t.prototype.getOperation=function(t){return this.ops[t]},t.prototype.getExpression=function(t){return this.exprs[t]},t.prototype.getCommand=function(t){return this.exprs[t.id](t,this)},t.prototype.eval=function(t){return i(t)?this.getCommand(this.defs.getExpression(t)):function(){return t}},t}(),w=function(){var t=function(n,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)n.hasOwnProperty(e)&&(t[e]=n[e])})(n,e)};return function(n,e){function r(){this.constructor=n}t(n,e),n.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),x=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return w(n,t),n.decode=function(t,n){return this.baseType},n.encode=function(t){return this.id},n.prototype.getSubTypes=function(){return null},n.prototype.getExactType=function(t){return this},n.prototype.isCompatible=function(t){return!0},n.prototype.isValid=function(t){return!0},n.prototype.normalize=function(t){return t},n.prototype.encode=function(){return n.encode(this)},n.id="any",n.operations=new h("any:"),n.baseType=new n({}),n}(d),g=function(){var t=function(n,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)n.hasOwnProperty(e)&&(t[e]=n[e])})(n,e)};return function(n,e){function r(){this.constructor=n}t(n,e),n.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),T=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return g(n,t),n.decode=function(t){return new n(t[1]||{})},n.encode=function(t){return f(t.options)?this.id:[this.id,t.options]},n.prototype.getSubTypes=function(){return null},n.prototype.getExactType=function(t){return this},n.prototype.isCompatible=function(t){return t instanceof n},n.prototype.isValid=function(t){return r(t)},n.prototype.normalize=function(t){return t},n.prototype.encode=function(){return n.encode(this)},n.id="num",n.operations=new h("num:"),n.baseType=new n({}),n}(d),j=function(){var t=function(n,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)n.hasOwnProperty(e)&&(t[e]=n[e])})(n,e)};return function(n,e){function r(){this.constructor=n}t(n,e),n.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),E=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return j(n,t),n.decode=function(t,e){return new n(t[1]||{})},n.encode=function(t){return f(t.options)?this.id:[this.id,t.options]},n.prototype.getSubTypes=function(){return null},n.prototype.getExactType=function(t){return this},n.prototype.isCompatible=function(t){return t instanceof n||t instanceof T},n.prototype.isValid=function(t){if(u(t))return!0;var n=t+"";return!(!this.options.true||!this.options.true[n])||!(!this.options.false||!this.options.false[n])},n.prototype.normalize=function(t){if(!u(t)){var n=t+"";if(this.options.true&&this.options.true[n])return!0;if(this.options.false&&this.options.false[n])return!1}return t},n.prototype.encode=function(){return n.encode(this)},n.id="bool",n.operations=new h("bool:"),n.baseType=new n({}),n}(d),A=function(){var t=function(n,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)n.hasOwnProperty(e)&&(t[e]=n[e])})(n,e)};return function(n,e){function r(){this.constructor=n}t(n,e),n.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),P=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return A(n,t),n.decode=function(t,e){return new n({props:a(t[1],function(t){return e.getType(t)})})},n.encode=function(t){var n=a(t.options.props,function(t){return t.encode()});return[this.id,n]},n.prototype.getSubTypes=function(){return this.options.props},n.prototype.getExactType=function(t){return this},n.prototype.isCompatible=function(t){if(!(t instanceof n))return!1;var e=this.options.props;for(var r in e)if(!t.options.props[r])return!1;return!0},n.prototype.isValid=function(t){if(!p(t))return!1;var n=this.options.props;for(var e in n)if(!n[e].isValid(t[e]))return!1;return!0},n.prototype.normalize=function(t){return t},n.prototype.encode=function(){return n.encode(this)},n.id="obj",n.operations=new h("obj:"),n.baseType=new n({props:{}}),n}(d),S=function(){var t=function(n,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)n.hasOwnProperty(e)&&(t[e]=n[e])})(n,e)};return function(n,e){function r(){this.constructor=n}t(n,e),n.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),I=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return S(n,t),n.decode=function(t,e){return new n({returnType:e.getType(t[1]),params:e.getType([P.id,t[2]])})},n.encode=function(t){var n=t.options;return n.true||n.false||(n=void 0),n?[this.id,n]:this.id},n.prototype.getSubTypes=function(){var t=this.options;return{returnType:t.returnType,params:t.params}},n.prototype.getExactType=function(t){return this},n.prototype.isCompatible=function(t){return t instanceof n},n.prototype.isValid=function(t){return c(t)},n.prototype.normalize=function(t){return t},n.prototype.encode=function(){return n.encode(this)},n.id="func",n.operations=new h("func:"),n.baseType=new n({returnType:x.baseType,params:P.baseType}),n}(d),V=function(){var t=function(n,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)n.hasOwnProperty(e)&&(t[e]=n[e])})(n,e)};return function(n,e){function r(){this.constructor=n}t(n,e),n.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),C=function(){return(C=Object.assign||function(t){for(var n,e=1,r=arguments.length;e<r;e++)for(var o in n=arguments[e])Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o]);return t}).apply(this,arguments)},M=function(t){var n="function"==typeof Symbol&&t[Symbol.iterator],e=0;return n?n.call(t):{next:function(){return t&&e>=t.length&&(t=void 0),{value:t&&t[e++],done:!t}}}},k=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return V(n,t),n.decode=function(t,e){var r=e.getType(t[1]),o=t[2]||{};return new n(C({item:r},o))},n.encode=function(t){var n=C({},t.options),e=n.item;return delete n.item,f(n)?[this.id,e.encode()]:[this.id,e.encode(),n]},n.forItem=function(t){return new n({item:t})},n.prototype.getSubTypes=function(){return{length:n.lengthType,item:this.options.item}},n.prototype.getExactType=function(t){return this},n.prototype.isCompatible=function(t){return t instanceof n&&this.options.item.isCompatible(t.options.item)},n.prototype.isValid=function(t){var n,e;if(!Array.isArray(t))return!1;var o=this.options,i=o.item,u=o.min,c=o.max;if(r(u)&&t.length<u)return!1;if(r(c)&&t.length>c)return!1;try{for(var p=M(t),s=p.next();!s.done;s=p.next()){var f=s.value;if(!i.isValid(f))return!1}}catch(t){n={error:t}}finally{try{s&&!s.done&&(e=p.return)&&e.call(p)}finally{if(n)throw n.error}}return!0},n.prototype.normalize=function(t){return t},n.prototype.encode=function(){return n.encode(this)},n.lengthType=new T({min:0,whole:!0}),n.id="list",n.operations=new h("list:"),n.baseType=new n({item:x.baseType}),n}(d),N=function(){var t=function(n,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)n.hasOwnProperty(e)&&(t[e]=n[e])})(n,e)};return function(n,e){function r(){this.constructor=n}t(n,e),n.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),z=function(t){var n="function"==typeof Symbol&&t[Symbol.iterator],e=0;return n?n.call(t):{next:function(){return t&&e>=t.length&&(t=void 0),{value:t&&t[e++],done:!t}}}},R=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return N(n,t),n.decode=function(t,e){return new n(t[1].map(function(t){return e.getType(t)}))},n.encode=function(t){var n=t.options.map(function(t){return t.encode()});return[this.id,n]},n.prototype.getSubTypes=function(){return null},n.prototype.forMany=function(t,n){var e,r,o=this.options;try{for(var i=z(o),u=i.next();!u.done;u=i.next()){var c=n(u.value);if(void 0!==c)return c}}catch(t){e={error:t}}finally{try{u&&!u.done&&(r=i.return)&&r.call(i)}finally{if(e)throw e.error}}return t},n.prototype.getExactType=function(t){return this.forMany(this,function(n){return n.isValid(t)?n:void 0})},n.prototype.isCompatible=function(t){return this.forMany(!1,function(n){return!!n.isCompatible(t)||void 0})},n.prototype.isValid=function(t){return this.forMany(!1,function(n){return!!n.isValid(t)||void 0})},n.prototype.normalize=function(t){return this.forMany(t,function(n){return n.isValid(t)?n.normalize(t):void 0})},n.prototype.encode=function(){return n.encode(this)},n.id="many",n.operations=new h("many:"),n.baseType=new n([x.baseType]),n}(d),X=function(){var t=function(n,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)n.hasOwnProperty(e)&&(t[e]=n[e])})(n,e)};return function(n,e){function r(){this.constructor=n}t(n,e),n.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),L=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return X(n,t),n.decode=function(t,e){return new n(e.getType(t[1]))},n.encode=function(t){return[this.id,t.options.encode()]},n.prototype.getSubTypes=function(){return this.options.getSubTypes()},n.prototype.getExactType=function(t){return this.options.getExactType(t)},n.prototype.isCompatible=function(t){return t instanceof n?this.options.isCompatible(t.options):this.options.isCompatible(t)},n.prototype.isValid=function(t){return null==t||this.options.isCompatible(t)},n.prototype.normalize=function(t){return null==t?t:this.options.normalize(t)},n.prototype.encode=function(){return n.encode(this)},n.id="?",n.operations=new h("?:"),n.baseType=new n(x.baseType),n}(d),U=function(){var t=function(n,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)n.hasOwnProperty(e)&&(t[e]=n[e])})(n,e)};return function(n,e){function r(){this.constructor=n}t(n,e),n.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),F=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return U(n,t),n.decode=function(t){return new n(t[1]||{})},n.encode=function(t){return f(t.options)?this.id:[this.id,t.options]},n.prototype.getSubTypes=function(){return null},n.prototype.getExactType=function(t){return this},n.prototype.isCompatible=function(t){return t instanceof n},n.prototype.isValid=function(t){if(!o(t))return!1;var n=this.options,e=n.min,i=n.max,u=n.requireLower,c=n.requireUpper,p=n.matches;return!(r(e)&&t.length<e)&&(!(r(i)&&t.length>i)&&((!u||t===t.toLowerCase())&&((!c||t===t.toUpperCase())&&!(p&&p instanceof RegExp&&!p.test(t)))))},n.prototype.normalize=function(t){return o(t)&&(this.options.forceLower&&(t=t.toLowerCase()),this.options.forceUpper&&(t=t.toUpperCase())),t},n.prototype.encode=function(){return n.encode(this)},n.id="text",n.operations=new h("text:"),n.baseType=new n({}),n}(d),q=function(){var t=function(n,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)n.hasOwnProperty(e)&&(t[e]=n[e])})(n,e)};return function(n,e){function r(){this.constructor=n}t(n,e),n.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),B=function(t){function n(e){var r=t.call(this,n.id)||this;return r.expressions=e,r}return q(n,t),n.decode=function(t,e){return new n(t[1].map(function(t){return e.getExpression(t)}))},n.encode=function(t){var n=t.expressions.map(function(t){return t.encode()});return[this.id,n]},n.prototype.getScope=function(){return null},n.prototype.encode=function(){return n.encode(this)},n.id="and",n}(_),D=function(){var t=function(n,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)n.hasOwnProperty(e)&&(t[e]=n[e])})(n,e)};return function(n,e){function r(){this.constructor=n}t(n,e),n.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),G=function(t){function n(e){var r=t.call(this,n.id)||this;return r.chain=e,r}return D(n,t),n.decode=function(t,e){return new n(t[1].map(function(t){return e.getExpression(t)}))},n.encode=function(t){var n=t.chain.map(function(t){return t.encode()});return[this.id,n]},n.prototype.getScope=function(){return null},n.prototype.encode=function(){return n.encode(this)},n.id="chain",n}(_),J=function(){var t=function(n,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)n.hasOwnProperty(e)&&(t[e]=n[e])})(n,e)};return function(n,e){function r(){this.constructor=n}t(n,e),n.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),W=function(t){function n(e,r){var o=t.call(this,n.id)||this;return o.define=e,o.body=r,o}return J(n,t),n.decode=function(t,e){return new n(a(t[1],function(t){return e.getExpression(t)}),e.getExpression(t[2]))},n.encode=function(t){var n=a(t.define,function(t){return t.encode()});return[this.id,n,t.body.encode()]},n.prototype.getScope=function(){return a(this.define,function(){return x.baseType})},n.prototype.encode=function(){return n.encode(this)},n.id="def",n}(_),H=function(){var t=function(n,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)n.hasOwnProperty(e)&&(t[e]=n[e])})(n,e)};return function(n,e){function r(){this.constructor=n}t(n,e),n.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),K=function(t){function n(e,r,o,i,u,c){var p=t.call(this,n.id)||this;return p.variable=e,p.start=r,p.end=o,p.body=i,p.breakVariable=u,p.maxIterations=c,p}return H(n,t),n.decode=function(t,e){return new n(t[1],e.getExpression(t[2]),e.getExpression(t[3]),e.getExpression(t[4]),t[5]||"break",parseInt(t[6])||this.MAX_ITERATIONS)},n.encode=function(t){var n=[this.id,t.variable,t.start.encode(),t.end.encode(),t.body.encode()],e=t.maxIterations!==this.MAX_ITERATIONS;return("break"!==t.breakVariable||e)&&n.push(t.breakVariable),e&&n.push(t.maxIterations),n},n.prototype.getScope=function(){var t;return(t={})[this.variable]=T.baseType,t[this.breakVariable]=E.baseType,t},n.prototype.encode=function(){return n.encode(this)},n.MAX_ITERATIONS=1e5,n.id="for",n}(_),Q=function(){var t=function(n,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)n.hasOwnProperty(e)&&(t[e]=n[e])})(n,e)};return function(n,e){function r(){this.constructor=n}t(n,e),n.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Y=function(t){function n(e){var r=t.call(this,n.id)||this;return r.path=e,r}return Q(n,t),n.decode=function(t,e){return new n(t[1].map(function(t){return e.getExpression(t)}))},n.encode=function(t){var n=t.path.map(function(t){return t.encode()});return[this.id,n]},n.prototype.getScope=function(){return null},n.prototype.encode=function(){return n.encode(this)},n.id="get",n}(_),Z=function(){var t=function(n,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)n.hasOwnProperty(e)&&(t[e]=n[e])})(n,e)};return function(n,e){function r(){this.constructor=n}t(n,e),n.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),$=function(t,n){var e="function"==typeof Symbol&&t[Symbol.iterator];if(!e)return t;var r,o,i=e.call(t),u=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)u.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(e=i.return)&&e.call(i)}finally{if(o)throw o.error}}return u},tt=function(t){function n(e,r){var o=t.call(this,n.id)||this;return o.cases=e,o.otherwise=r,o}return Z(n,t),n.decode=function(t,e){return new n(t[1].map(function(t){var n=$(t,2),r=n[0],o=n[1];return[e.getExpression(r),e.getExpression(o)]}),e.getExpression(t[2]))},n.encode=function(t){var n=t.cases.map(function(t){var n=$(t,2),e=n[0],r=n[1];return[e.encode(),r.encode()]});return s(t.otherwise)?[this.id,n]:[this.id,n,t.otherwise.encode()]},n.prototype.getScope=function(){return null},n.prototype.encode=function(){return n.encode(this)},n.id="if",n}(_),nt=function(){var t=function(n,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)n.hasOwnProperty(e)&&(t[e]=n[e])})(n,e)};return function(n,e){function r(){this.constructor=n}t(n,e),n.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),et=function(t){function n(e){var r=t.call(this,n.id)||this;return r.expression=e,r}return nt(n,t),n.decode=function(t,e){return new n(e.getExpression(t[1]))},n.encode=function(t){var n=t.expression.encode();return[this.id,n]},n.prototype.getScope=function(){return null},n.prototype.encode=function(){return n.encode(this)},n.id="not",n}(_),rt=function(){var t=function(n,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)n.hasOwnProperty(e)&&(t[e]=n[e])})(n,e)};return function(n,e){function r(){this.constructor=n}t(n,e),n.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),ot=function(t){function n(e,r,o){var i=t.call(this,n.id)||this;return i.name=e,i.params=r,i.scopeAlias=o,i}return rt(n,t),n.decode=function(t,e){return new n(t[1],a(t[2],function(t){return e.getExpression(t)}),t[3]||{})},n.encode=function(t){var n=a(t.params,function(t){return t.encode()});return f(t.scopeAlias)?[this.id,t.name,n]:[this.id,t.name,n,t.scopeAlias]},n.prototype.getScope=function(){return null},n.prototype.encode=function(){return n.encode(this)},n.id="op",n}(_),it=function(){var t=function(n,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)n.hasOwnProperty(e)&&(t[e]=n[e])})(n,e)};return function(n,e){function r(){this.constructor=n}t(n,e),n.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),ut=function(t){function n(e){var r=t.call(this,n.id)||this;return r.expressions=e,r}return it(n,t),n.decode=function(t,e){return new n(t[1].map(function(t){return e.getExpression(t)}))},n.encode=function(t){var n=t.expressions.map(function(t){return t.encode()});return[this.id,n]},n.prototype.getScope=function(){return null},n.prototype.encode=function(){return n.encode(this)},n.id="or",n}(_),ct=function(){var t=function(n,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)n.hasOwnProperty(e)&&(t[e]=n[e])})(n,e)};return function(n,e){function r(){this.constructor=n}t(n,e),n.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),pt=function(t){function n(e,r){var o=t.call(this,n.id)||this;return o.path=e,o.value=r,o}return ct(n,t),n.decode=function(t,e){return new n(t[1].map(function(t){return e.getExpression(t)}),e.getExpression(t[2]))},n.encode=function(t){var n=t.path.map(function(t){return t.encode()});return[this.id,n,t.value.encode()]},n.prototype.getScope=function(){return null},n.prototype.encode=function(){return n.encode(this)},n.id="set",n}(_),st=function(){var t=function(n,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)n.hasOwnProperty(e)&&(t[e]=n[e])})(n,e)};return function(n,e){function r(){this.constructor=n}t(n,e),n.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),ft=function(t,n){var e="function"==typeof Symbol&&t[Symbol.iterator];if(!e)return t;var r,o,i=e.call(t),u=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)u.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(e=i.return)&&e.call(i)}finally{if(o)throw o.error}}return u},at=function(t){function n(e,r,o,i){var u=t.call(this,n.id)||this;return u.value=e,u.op=r,u.cases=o,u.defaultCase=i,u}return st(n,t),n.decode=function(t,e){return new n(e.getExpression(t[1]),t[2],t[3].map(function(t){var n=ft(t,2),r=n[0],o=n[1];return[r.map(function(t){return e.getExpression(t)}),e.getExpression(o)]}),e.getExpression(t[4]))},n.encode=function(t){var n=t.value.encode(),e=t.cases.map(function(t){var n=ft(t,2),e=n[0],r=n[1];return[e.map(function(t){return t.encode()}),r.encode()]});return s(t.defaultCase)?[this.id,n,t.op,e]:[this.id,n,t.op,e,t.defaultCase.encode()]},n.prototype.getScope=function(){return null},n.prototype.encode=function(){return n.encode(this)},n.id="switch",n}(_),yt=function(){var t=function(n,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)n.hasOwnProperty(e)&&(t[e]=n[e])})(n,e)};return function(n,e){function r(){this.constructor=n}t(n,e),n.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),dt=function(t){function n(e,r){var o=t.call(this,n.id)||this;return o.template=e,o.params=r,o}return yt(n,t),n.decode=function(t,e){return new n(t[1],a(t[2],function(t){return e.getExpression(t)}))},n.encode=function(t){var n=a(t.params,function(t){return t.encode()});return[this.id,t.template,n]},n.prototype.getScope=function(){return null},n.prototype.encode=function(){return n.encode(this)},n.id="tmpl",n}(_),lt=function(){var t=function(n,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)n.hasOwnProperty(e)&&(t[e]=n[e])})(n,e)};return function(n,e){function r(){this.constructor=n}t(n,e),n.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),ht=function(t){function n(e,r,o,i){var u=t.call(this,n.id)||this;return u.condition=e,u.body=r,u.breakVariable=o,u.maxIterations=i,u}return lt(n,t),n.decode=function(t,e){return new n(e.getExpression(t[1]),e.getExpression(t[2]),t[3]||"break",parseInt(t[4])||this.MAX_ITERATIONS)},n.encode=function(t){var n=[this.id,t.condition.encode(),t.body.encode()],e=t.maxIterations!==this.MAX_ITERATIONS;return("break"!==t.breakVariable||e)&&n.push(t.breakVariable),e&&n.push(t.maxIterations),n},n.prototype.getScope=function(){var t;return(t={})[this.breakVariable]=E.baseType,t},n.prototype.encode=function(){return n.encode(this)},n.MAX_ITERATIONS=1e5,n.id="while",n}(_),_t=function(){var t=function(n,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)n.hasOwnProperty(e)&&(t[e]=n[e])})(n,e)};return function(n,e){function r(){this.constructor=n}t(n,e),n.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),bt=function(t){function n(e,r,o,i){var u=t.call(this,n.id)||this;return u.condition=e,u.body=r,u.breakVariable=o,u.maxIterations=i,u}return _t(n,t),n.decode=function(t,e){return new n(e.getExpression(t[1]),e.getExpression(t[2]),t[3]||"break",parseInt(t[4])||this.MAX_ITERATIONS)},n.encode=function(t){var n=[this.id,t.condition.encode(),t.body.encode()],e=t.maxIterations!==this.MAX_ITERATIONS;return("break"!==t.breakVariable||e)&&n.push(t.breakVariable),e&&n.push(t.maxIterations),n},n.prototype.getScope=function(){var t;return(t={})[this.breakVariable]=E.baseType,t},n.prototype.encode=function(){return n.encode(this)},n.MAX_ITERATIONS=1e5,n.id="do",n}(_),vt=new O({types:[k,T,F,E,P,I,x,R,L],expressions:[v,Y,pt,ot,G,tt,at,et,B,ut,K,ht,bt,W,dt]});e.d(n,"isNumber",function(){return r}),e.d(n,"isString",function(){return o}),e.d(n,"isArray",function(){return i}),e.d(n,"isBoolean",function(){return u}),e.d(n,"isFunction",function(){return c}),e.d(n,"isObject",function(){return p}),e.d(n,"isUndefined",function(){return s}),e.d(n,"isEmpty",function(){return f}),e.d(n,"mapObject",function(){return a}),e.d(n,"Definitions",function(){return O}),e.d(n,"Expression",function(){return _}),e.d(n,"Operations",function(){return h}),e.d(n,"Runtime",function(){return m}),e.d(n,"Type",function(){return d}),e.d(n,"AnyType",function(){return x}),e.d(n,"BooleanType",function(){return E}),e.d(n,"FunctionType",function(){return I}),e.d(n,"ListType",function(){return k}),e.d(n,"ManyType",function(){return R}),e.d(n,"NumberType",function(){return T}),e.d(n,"ObjectType",function(){return P}),e.d(n,"OptionalType",function(){return L}),e.d(n,"TextType",function(){return F}),e.d(n,"AndExpression",function(){return B}),e.d(n,"ChainExpression",function(){return G}),e.d(n,"ConstantExpression",function(){return v}),e.d(n,"DefineExpression",function(){return W}),e.d(n,"ForExpression",function(){return K}),e.d(n,"GetExpression",function(){return Y}),e.d(n,"IfExpression",function(){return tt}),e.d(n,"NotExpression",function(){return et}),e.d(n,"OperationExpression",function(){return ot}),e.d(n,"OrExpression",function(){return ut}),e.d(n,"SetExpression",function(){return pt}),e.d(n,"SwitchExpression",function(){return at}),e.d(n,"TemplateExpression",function(){return dt}),e.d(n,"WhileExpression",function(){return ht}),e.d(n,"defs",function(){return vt})}])});
//# sourceMappingURL=expangine-runtime.js.map